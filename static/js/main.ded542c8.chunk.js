(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{123:function(e,t,a){},124:function(e,t,a){},127:function(e,t){},134:function(e,t){},158:function(e,t,a){},164:function(e,t,a){},167:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(77),s=a.n(c),l=(a(94),a(87)),o=a(1),i=a.n(o),u=a(4),d=a(78),m=a(79),f=a(88),p=a(86),v=(a(56),a(111),a(122),a(123),a(124),a(31)),b=a(80),h=a.n(b),E=a(25),g=a(2),N=(a(74),a(17)),_=a.n(N),j=(a(158),a(81)),w=a.n(j),O=a(82),x=a.n(O),y={},k={},I={};function S(e){return e in I?I[e]:I[e]=new Promise((function(t){k[e]=new Image,k[e].onload=function(){y[e]=!0,t()},k[e].onerror=function(a){y[e]=!1,t()},k[e].src="https://i.berry.cards/".concat(e)}))}function C(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!0),o=Object(g.a)(l,2),i=o[0],u=o[1],d=Object(n.useState)(!1),m=Object(g.a)(d,2),f=m[0],p=m[1],v=Object(n.useRef)(null),b=e.cardReady,h=e.cardId;return Object(n.useEffect)((function(){u(!0),s(null),b(!1),p(!1),S(h).then((function(){p(!y[h]),u(!1),y[h]&&(b(!0),s(k[h]))}))}),[h,b,v]),Object(n.useEffect)((function(){v.current&&c&&v.current.getContext("2d").drawImage(c,0,0)}),[c]),r.a.createElement("div",null,i?r.a.createElement("img",{className:e.className,src:x.a,alt:"The card #".concat(h," is loading")}):f?r.a.createElement("img",{className:e.className,src:w.a,alt:"The card #".concat(h," is broken")}):"",r.a.createElement("canvas",{className:"".concat(e.className).concat(!c||i||f?" d-none":""),ref:v,width:400,height:400,alt:"Card #".concat(h)}))}var A=a(11),R=function(){var e=(new Date).getTime()-1621623768597;return Math.pow(2,e/2628e6)},q=a(83),P=a.n(q),F=function(e){return parseFloat(e)/1e24};function T(e){var t=F(e.price/R()*1.0001);function a(){return(a=Object(u.a)(i.a.mark((function t(a){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,e._near.contract.buy_card({card_id:e.cardId},"200000000000000",P()(e.price/R()*1.0001).toFixed(0));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var n=t/100,c=t/100,s=t-n-c;e.ownerId||(c+=s,s=0);var l=1.2*t;return r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-success",disabled:!e.signedIn,onClick:function(e){return function(e){return a.apply(this,arguments)}(e)}},"Buy for ",t.toFixed(2)," NEAR"),r.a.createElement("div",{className:"text-muted text-start"},"Price breakdown:",r.a.createElement("ul",null,e.ownerId&&r.a.createElement("li",null,"Owner @",e.ownerId," will get ",s.toFixed(2)," NEAR"),r.a.createElement("li",null,"Art DAO will get ",c.toFixed(2)," NEAR"),r.a.createElement("li",null,"1% App commission is ",n.toFixed(2)," NEAR")),r.a.createElement("p",null,"The new price will be ",l.toFixed(2)," NEAR")))}var D=function(e){return r.a.createElement("div",null,r.a.createElement(A.b,{to:"/c/".concat(e.cardId),className:"btn btn-success",disabled:!e.signedIn},F(e.price/R()).toFixed(2)," NEAR"))};var L=function(e){var t=Object(n.useState)(e.rating),a=Object(g.a)(t,2),c=a[0],s=a[1],l=e.cardId,o=e.rating,d=Object(n.useCallback)(Object(u.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._near.contract.get_rating({card_id:l});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),[e._near,l]);return Object(n.useEffect)((function(){e.connected&&(o?s(o):d().then(s))}),[e.connected,o,d]),e.cardId?r.a.createElement("div",{className:"card card-preview m-2"},r.a.createElement(A.b,{to:"/c/".concat(l)},r.a.createElement(C,{className:"card-img-top",cardId:l,cardReady:function(){return!1}})),r.a.createElement("div",{className:"card-body"},"#",l),r.a.createElement("div",{className:"card-footer text-center"},r.a.createElement(D,Object.assign({},e,{cardId:l,price:c})))):r.a.createElement("div",{className:"card card-preview m-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading..."))))},B=a(41),V=a.n(B);var U=function(e){var t=Object(n.useState)([]),a=Object(g.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),o=Object(g.a)(l,2),d=o[0],m=o[1],f=Object(n.useState)(_()()),p=Object(g.a)(f,1)[0],v=function(){var t=Object(u.a)(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(E.a)(c),n=a.length>0?a[a.length-1]:null,t.next=4,e._near.contract.get_top({from_key:n,limit:25});case 4:r=t.sent,a.push.apply(a,Object(E.a)(r)),0===r.length&&m(!1),s(a);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){e.connected&&m(!0)}),[e.connected]);var b=c.map((function(t){var a=Object(g.a)(t,2),n=a[0],c=a[1],s="".concat(p,"-").concat(c);return r.a.createElement(L,Object.assign({},e,{key:s,cardId:c,rating:n}))})),h=r.a.createElement("div",{className:"d-flex justify-content-center",key:"".concat(p,"-loader")},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")));return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col"},r.a.createElement(V.a,{pageStart:0,loadMore:v,hasMore:d,loader:h},b)))))};a(164);var M=function(e){var t=Object(n.useState)(!1),a=Object(g.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),o=Object(g.a)(l,2),d=o[0],m=o[1],f=Object(n.useState)(Promise.resolve()),p=Object(g.a)(f,1)[0],v=Object(n.useState)(_()()),b=Object(g.a)(v,1)[0],h=e.requests?e.requests[0]:null;e.requests&&e.requests.slice(1).forEach((function(e){S(e.left),S(e.right)}));var E=function(){var t=Object(u.a)(i.a.mark((function t(a,n,r){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),"SelectedLeft"!==r||c){t.next=3;break}return t.abrupt("return");case 3:if("SelectedRight"!==r||d){t.next=5;break}return t.abrupt("return");case 5:e.popRequest(),p.then(Object(u.a)(i.a.mark((function t(){var a,c,s,l,o;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=100,c=null,s=0;case 3:if(!(s<5)){t.next=25;break}return t.prev=4,t.next=7,e._near.contract.vote({request:n,response:r},a.toString()+"000000000000");case 7:c=t.sent,t.next=21;break;case 10:if(t.prev=10,t.t0=t.catch(4),l=t.t0.toString(),console.warn(l),-1===l.indexOf("prepaid gas")){t.next=17;break}return a+=50,t.abrupt("continue",22);case 17:if(-1===l.indexOf("does not have enough balance")){t.next=21;break}return t.next=20,e.refreshAllowance();case 20:return t.abrupt("return");case 21:return t.abrupt("break",25);case 22:++s,t.next=3;break;case 25:c&&("SelectedLeft"!==r&&"SelectedRight"!==r||(o="SelectedLeft"===r?n.left:n.right,e.addRecentCard(o)),e.addRequest(c));case 26:case"end":return t.stop()}}),t,null,[[4,10]])}))));case 7:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}(),N=e.recentCards.map((function(t){var a="".concat(b,"-").concat(t);return r.a.createElement(L,Object.assign({},e,{key:a,cardId:t}))}));return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},h?r.a.createElement("div",null,r.a.createElement("h3",null,"Vote"),r.a.createElement("div",{className:"row justify-content-md-center mb-3"},r.a.createElement("div",{className:"col col-sm-6"},r.a.createElement("div",{className:"card-picker".concat(c?"":" disabled"),onClick:function(e){return E(e,h,"SelectedLeft")}},r.a.createElement(C,{className:"img-fluid",cardId:h.left,cardReady:s}))),r.a.createElement("div",{className:"col col-sm-6"},r.a.createElement("div",{className:"card-picker".concat(d?"":" disabled"),onClick:function(e){return E(e,h,"SelectedRight")}},r.a.createElement(C,{className:"img-fluid",cardId:h.right,cardReady:m})))),r.a.createElement("div",{className:"row justify-content-md-center mb-3"},r.a.createElement("button",{className:"btn btn-lg btn-danger",onClick:function(e){return E(e,h,"Skipped")}},"Skip both cards"))):r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading..."))),r.a.createElement("div",{className:"row justify-content-md-center mb-3"},N.length>0&&r.a.createElement("div",null,r.a.createElement("h3",null,"Recent votes"),N))))},K=a(3),G=a(54),H=a.n(G),J=a(85),W=function(e){return e?{ownerId:e.owner_id,purchasePrice:F(e.purchase_price),purchaseTime:new Date(parseFloat(e.purchase_time)/1e6),volume:F(e.volume),artDaoProfit:F(e.art_dao_profit),numTrades:e.num_trades}:{ownerId:null,purchasePrice:0,purchaseTime:null,volume:0,artDaoProfit:0,numTrades:0}};var Y=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1],l=e.cardId,o=e.refreshTime,d=e.hidden,m=Object(n.useCallback)(Object(u.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._near.contract.get_rating({card_id:l});case 2:return a=t.sent,t.t0=W,t.next=6,e._near.contract.get_card_info({card_id:l});case 6:return t.t1=t.sent,(n=(0,t.t0)(t.t1)).refreshTime=o,n.rating=a,t.abrupt("return",n);case 11:case"end":return t.stop()}}),t)}))),[e._near,l,o]);return Object(n.useEffect)((function(){e.connected&&!d&&(S(l),m().then(s))}),[e.connected,m,l,d]),c?r.a.createElement("div",{className:"card m-2"},r.a.createElement(C,{className:"card-img-top",cardId:l,cardReady:function(){return!1}}),r.a.createElement("div",{className:"card-body text-start"},r.a.createElement("h3",null,"#",l),c.ownerId?r.a.createElement("div",null,r.a.createElement("p",null,"Owned by ",c.ownerId===e.signedAccountId?"you":r.a.createElement(A.b,{to:"/a/".concat(c.ownerId)},"@",c.ownerId),r.a.createElement("br",null),"Purchased ",r.a.createElement(J.a,{datetime:c.purchaseTime})," for ",c.purchasePrice.toFixed(2)," NEAR",r.a.createElement("br",null)),r.a.createElement("p",null,"Total card volume ",c.volume.toFixed(2)," NEAR",r.a.createElement("br",null),"Art DAO got ",c.artDaoProfit.toFixed(2)," NEAR",r.a.createElement("br",null))):r.a.createElement("div",null,r.a.createElement("p",null,"Not owned by anyone."))),r.a.createElement("div",{className:"card-footer text-center"},c.ownerId===e.signedAccountId?r.a.createElement(D,Object.assign({},e,{cardId:l,price:c.rating})):r.a.createElement(T,Object.assign({},e,{cardId:l,price:c.rating,ownerId:c.ownerId})))):r.a.createElement("div",{className:"card m-2"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading..."))))};var z=function(e){var t=Object(K.f)().cardId;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col col-12 col-lg-8 col-xl-6"},r.a.createElement(Y,Object.assign({},e,{cardId:parseInt(t)})))))};var Q=function(e){var t=Object(K.f)().accountId,a=Object(n.useState)(null),c=Object(g.a)(a,2),s=c[0],l=c[1],o=Object(n.useState)(!0),d=Object(g.a)(o,2),m=d[0],f=d[1],p=Object(n.useState)([]),v=Object(g.a)(p,2),b=v[0],h=v[1],E=Object(n.useState)(_()()),N=Object(g.a)(E,1)[0],j=Object(n.useCallback)(Object(u.a)(i.a.mark((function a(){var n;return i.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e._near.getAccount(t);case 2:if(n=a.sent){a.next=5;break}return a.abrupt("return");case 5:return l(n),a.next=8,n.fetchCards();case 8:return a.abrupt("return",a.sent);case 9:case"end":return a.stop()}}),a)}))),[e._near,t]);Object(n.useEffect)((function(){e.connected&&j().then((function(e){e.sort((function(e,t){return t[1]-e[1]})),h(e),f(!1)}))}),[e.connected,j]);var w=b.map((function(t){var a=Object(g.a)(t,2),n=a[0],c=a[1],s="".concat(N,"-").concat(n);return r.a.createElement(L,Object.assign({},e,{key:s,cardId:n,rating:c}))}));return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-md-center"},m?r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")))):r.a.createElement("div",{className:"col "},r.a.createElement("h3",null,t===e.signedAccountId?"Your cards":"Cards owned by @".concat(t)),r.a.createElement("div",null,w)),s?r.a.createElement("div",{className:"col col-12 col-lg-4 col-xl-4"},r.a.createElement("h3",null,"Stats"),r.a.createElement("ul",null,r.a.createElement("li",null,"Num cards: ",s.numCards),r.a.createElement("li",null,"Purchase volume: ",s.purchaseVolume.toFixed(2)," NEAR"),r.a.createElement("li",null,"Num purchases: ",s.numPurchases),r.a.createElement("li",null,"Sale profit: ",s.saleProfit.toFixed(2)," NEAR"),r.a.createElement("li",null,"Num sales: ",s.numSales),r.a.createElement("li",null,"Num votes: ",s.numVotes))):r.a.createElement("div",{className:"col col-12 col-lg-8 col-xl-6"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading..."))))))};var X=function(e){var t=Object(n.useState)(null),a=Object(g.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!0),o=Object(g.a)(l,2),d=o[0],m=o[1],f=Object(n.useCallback)(Object(u.a)(i.a.mark((function t(){var a,n,r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e._near.contract.get_trade_data(),e._near.contract.get_num_accounts()]);case 2:return a=t.sent,n=Object(g.a)(a,2),r=n[0],c=n[1],t.abrupt("return",{numAccounts:c,numPurchases:r.num_purchases,numUniqueCardsBought:r.num_unique_cards_bought,nearVolume:F(r.near_volume),appCommission:F(r.app_owner_profit),artDaoProfit:F(r.art_dao_profit),appOwnerId:r.app_owner_id,artDaoId:r.art_dao_id,totalVotes:r.total_votes});case 7:case"end":return t.stop()}}),t)}))),[e._near]);return Object(n.useEffect)((function(){e.connected&&f().then((function(e){s(e),m(!1)}))}),[e.connected,f]),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},d?r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")))):r.a.createElement("div",{className:"col col-12 col-lg-6 col-xl-6"},r.a.createElement("h3",null,"Global Stats"),r.a.createElement("ul",null,r.a.createElement("li",null,"Num accounts: ",c.numAccounts),r.a.createElement("li",null,"Total votes: ",c.totalVotes),r.a.createElement("li",null,"Total purchases: ",c.numPurchases),r.a.createElement("li",null,"Total unique purchases: ",c.numUniqueCardsBought),r.a.createElement("li",null,"Total volume: ",c.nearVolume.toFixed(2)," NEAR"),r.a.createElement("li",null,"Total Art DAO profit: ",c.artDaoProfit.toFixed(2)," NEAR"),r.a.createElement("li",null,"Art DAO account ID: ",r.a.createElement("a",{href:"https://explorer.near.org/accounts/".concat(c.artDaoId)},"@",c.artDaoId)),r.a.createElement("li",null,"Total App commission: ",c.appCommission.toFixed(2)," NEAR")))))};var Z=function(e){var t=Object(n.useState)([]),a=Object(g.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(!1),o=Object(g.a)(l,2),d=o[0],m=o[1],f=Object(n.useState)(_()()),p=Object(g.a)(f,1)[0],v=function(){var t=Object(u.a)(i.a.mark((function t(){var a,n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(E.a)(c),n=a.length,t.next=4,e._near.contract.get_recent_cards({offset:n,limit:100});case 4:r=t.sent,a.push.apply(a,Object(E.a)(r)),0===r.length&&m(!1),s(a);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){e.connected&&m(!0)}),[e.connected]);var b={},h=c.filter((function(e){var t=Object(g.a)(e,2),a=(t[0],t[1]);return!(a in b)&&(b[a]=!0,!0)})).map((function(t){var a=Object(g.a)(t,2),n=a[0],c=a[1],s="".concat(p,"-").concat(c);return r.a.createElement(L,Object.assign({},e,{key:s,cardId:c,rating:n}))})),N=r.a.createElement("div",{className:"d-flex justify-content-center",key:"".concat(p,"-loader")},r.a.createElement("div",{className:"spinner-grow",role:"status"},r.a.createElement("span",{className:"visually-hidden"},"Loading...")));return r.a.createElement("div",null,r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row justify-content-md-center"},r.a.createElement("div",{className:"col"},r.a.createElement(V.a,{pageStart:0,loadMore:v,hasMore:d,loader:N},h)))))},$="berry.cards"===window.location.hostname?{networkId:"mainnet",nodeUrl:"https://rpc.mainnet.near.org",archivalNodeUrl:"https://rpc.mainnet.internal.near.org",contractName:"cards.berryclub.ek.near",walletUrl:"https://wallet.near.org"}:{networkId:"testnet",nodeUrl:"https://rpc.testnet.near.org",archivalNodeUrl:"https://rpc.testnet.internal.near.org",contractName:"dev-1621626423763-23601795253740",walletUrl:"https://wallet.testnet.near.org"},ee=function(e){return{requests:e.requests,numCards:e.num_cards,purchaseVolume:F(e.purchase_volume),numPurchases:e.num_purchases,saleProfit:F(e.sale_profit),numSales:e.num_sales,numVotes:e.num_votes}},te=function(e){Object(f.a)(a,e);var t=Object(p.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e))._near={},n._near.lsKey=$.contractName+":v01:",n._near.lsKeyRecentCards=n._near.lsKey+"recentCards",n.state={connected:!1,isNavCollapsed:!0,account:null,requests:null,recentCards:H.a.get(n._near.lsKeyRecentCards)||[]},n._initNear().then((function(){n.setState({signedIn:!!n._near.accountId,signedAccountId:n._near.accountId,connected:!0})})),n}return Object(m.a)(a,[{key:"_initNear",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,r=this;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new v.keyStores.BrowserLocalStorageKeyStore,e.next=3,v.connect(Object.assign({deps:{keyStore:t}},$));case 3:if(a=e.sent,this._near.keyStore=t,this._near.near=a,this._near.walletConnection=new v.WalletConnection(a,$.contractName),this._near.accountId=this._near.walletConnection.getAccountId(),this._near.account=this._near.walletConnection.account(),this._near.contract=new v.Contract(this._near.account,$.contractName,{viewMethods:["get_account","get_num_accounts","get_accounts","get_num_cards","get_top","get_rating","get_trade_data","get_card_info","get_account_cards","get_recent_cards"],changeMethods:["register_account","vote","buy_card"]}),this._near.accounts={},this._near.getAccount=function(e){return e in r._near.accounts?r._near.accounts[e]:r._near.accounts[e]=Promise.resolve(Object(u.a)(i.a.mark((function t(){var a,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r._near.contract.get_account({account_id:e});case 2:return a=t.sent,(n=a?ee(a):null)&&(n.fetchCards=function(){if(n.cardFetching)return n.cardFetching;for(var t=[],a=0;a<n.numCards;a+=50)t.push(r._near.contract.get_account_cards({account_id:e,from_index:a,limit:50}));return n.cardFetching=Promise.resolve(Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t);case 2:return e.abrupt("return",e.sent.flat());case 3:case"end":return e.stop()}}),e)})))())}),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))())},!this._near.accountId){e.next=24;break}return e.next=15,this._near.getAccount(this._near.accountId);case 15:if(null!==(n=e.sent)){e.next=23;break}return e.next=19,this._near.contract.register_account();case 19:return delete this._near.accounts[this._near.accountId],e.next=22,this._near.getAccount(this._near.accountId);case 22:n=e.sent;case 23:this.setState({account:n,requests:n.requests});case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"requestSignIn",value:function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),"Berry Cards",e.next=4,this._near.walletConnection.requestSignIn($.contractName,"Berry Cards");case 4:return e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"logOut",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._near.walletConnection.signOut(),this._near.accountId=null,this.setState({signedIn:!!this._accountId,signedAccountId:this._accountId});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"popRequest",value:function(e){var t=this.state.requests.slice(1);this.setState({requests:t},e)}},{key:"addRequest",value:function(e,t){var a=this.state.requests.slice(0);a.push(e),this.setState({requests:a},t)}},{key:"addRecentCard",value:function(e){var t=this.state.recentCards.slice(0),a=t.indexOf(e);-1!==a&&t.splice(a,1),t.unshift(e),t=t.slice(0,5),H.a.set(this._near.lsKeyRecentCards,t),this.setState({recentCards:t})}},{key:"refreshAllowance",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("You're out of access key allowance. Need sign in again to refresh it"),e.next=3,this.logOut();case 3:return e.next=5,this.requestSignIn();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=Object(l.a)({_near:this._near,updateState:function(t,a){return e.setState(t,a)},popRequest:function(t){return e.popRequest(t)},addRequest:function(t,a){return e.addRequest(t,a)},addRecentCard:function(t){return e.addRecentCard(t)},refreshAllowance:function(){return e.refreshAllowance()}},this.state),a=this.state.connected?this.state.signedIn?r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-outline-secondary",onClick:function(){return e.logOut()}},"Sign out (",this.state.signedAccountId,")")):r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(t){return e.requestSignIn(t)}},"Sign in with NEAR Wallet")):r.a.createElement("div",null,"Connecting... ",r.a.createElement("span",{className:"spinner-grow spinner-grow-sm",role:"status","aria-hidden":"true"}));return r.a.createElement("div",{className:"App"},r.a.createElement(A.a,{basename:""},r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-light bg-light mb-3"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement(A.b,{className:"navbar-brand",to:"/",title:"NEAR.fm"},r.a.createElement("img",{src:h.a,alt:"Berry Cards",className:"d-inline-block align-middle"}),"Berry Cards"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav me-auto mb-2 mb-lg-0"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(A.b,{className:"nav-link","aria-current":"page",to:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(A.b,{className:"nav-link","aria-current":"page",to:"/recent"},"Recent")),this.state.signedIn&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(A.b,{className:"nav-link","aria-current":"page",to:"/top"},"Top")),this.state.signedIn&&r.a.createElement("li",{className:"nav-item"},r.a.createElement(A.b,{className:"nav-link","aria-current":"page",to:"/a/".concat(this.state.signedAccountId)},"Profile")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(A.b,{className:"nav-link","aria-current":"page",to:"/stats"},"Stats"))),r.a.createElement("form",{className:"d-flex"},a)))),r.a.createElement("a",{className:"github-fork-ribbon right-bottom fixed",href:"https://github.com/evgenykuzyakov/berry-hot","data-ribbon":"Fork me on GitHub",title:"Fork me on GitHub"},"Fork me on GitHub"),r.a.createElement(K.c,null,r.a.createElement(K.a,{exact:!0,path:"/"},this.state.signedIn?r.a.createElement(M,t):r.a.createElement(U,t)),r.a.createElement(K.a,{exact:!0,path:"/recent"},r.a.createElement(Z,t)),r.a.createElement(K.a,{exact:!0,path:"/top"},r.a.createElement(U,t)),r.a.createElement(K.a,{exact:!0,path:"/stats"},r.a.createElement(X,t)),r.a.createElement(K.a,{exact:!0,path:"/a/:accountId"},r.a.createElement(Q,t)),r.a.createElement(K.a,{exact:!0,path:"/c/:cardId"},r.a.createElement(z,t)))))}}]),a}(r.a.Component);s.a.render(r.a.createElement(te,null),document.getElementById("root"))},74:function(e,t,a){},80:function(e,t,a){e.exports=a.p+"static/media/logo.272328f4.png"},81:function(e,t,a){e.exports=a.p+"static/media/tomato.9239fac3.png"},82:function(e,t,a){e.exports=a.p+"static/media/avocado.f0698336.gif"},89:function(e,t,a){e.exports=a(167)},94:function(e,t,a){}},[[89,1,2]]]);
//# sourceMappingURL=main.ded542c8.chunk.js.map